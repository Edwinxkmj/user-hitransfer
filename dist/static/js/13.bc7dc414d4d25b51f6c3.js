webpackJsonp([13],{OPkG:function(t,e){},"Sa/4":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),r=s("Dd8w"),n=s.n(r),o=s("jvWE"),c=s("NYxO"),l={name:"AppointmentBox",data:function(){return{use_time:"",form:{city_id:""},address:[""],arrive:"",carType:[],carTypeIndex:0,isSelectCar:!1,searchLoading:!1,carList:[],trapInfo:{},totalPrice:"",isUseGoogle:!1,restaurants:[],sourceCities:[]}},computed:n()({},Object(c.e)({lang:function(t){return t.lang},cityLoading:function(t){return t.cityLoading}}),Object(c.c)(["cityListByGroup"])),methods:n()({},Object(c.b)({getCityList:"getCityList"}),{carTypeChange:function(t){this.totalPrice="¥ "+this.carList[t].price,this.carTypeIndex=t},getCityList:function(){var t=this;this.$axios.get(this.lang+"/tools/city").then(function(e){t.sourceCities=e.data.data})},getCity:function(t){this.city=t},doAddress:function(){if(this.address.length>=5)return!1;this.address.push("")},doDelete:function(t){this.address.splice(t,1)},getCityName:function(){var t=this,e=this.sourceCities.filter(function(e){return e.id==t.form.city_id});return e.length>0?e[0].name:""},querySearchAsync:function(t,e){var s=this,i=this.getCityName();t&&(this.isUseGoogle?Object(o.d)(t).then(function(t){s.restaurants=t,e(t)}):Object(o.a)(t,i,this.$axios.jsonp).then(function(t){s.restaurants=t,e(t)}))},searchCar:function(){var t=this;if(!this.use_time)return this.$message.error(this.$t("m.pick-up-time")),!1;if(!this.address[0])return this.$message.error(this.$t("yz.null-start-address")),!1;if(!this.arrive)return this.$message.error(this.$t("yz.null-end-address")),!1;var e=[this.arrive],s=this.form;s.use_time=this.use_time,s.address=this.address.concat(e),this.searchLoading=!0,this.$axios.post(this.lang+"/point-car/check-price",s).then(function(e){t.searchLoading=!1,e.data.data.list.length>0?(t.isSelectCar=!0,t.carList=e.data.data.list,t.trapInfo=e.data.data):t.$message.error(t.$t("m.no-data"))},function(){t.searchLoading=!1})},toConfirmOrder:function(){var t=this.form;t.address=this.address,t.arrive=this.arrive,t.car=this.carList[this.carTypeIndex],t.cityName=this.getCityName(),t.currency=this.trapInfo.currency,t.distance=this.trapInfo.distance,t.extra_ffee=this.trapInfo.extra_ffee,sessionStorage.setItem("appointmentData",a()(t)),this.$router.push({name:"appointmentOrder"})},getToday:function(){var t=new Date;return t.setTime(t.getTime()),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}}),mounted:function(){var t=this;0===this.sourceCities.length?this.getCityList():this.form.city_id=this.sourceCities[0].id,"{}"!=a()(this.$route.params)&&(this.form=this.$route.params.form,this.use_time=this.$route.params.form.use_time,this.address=this.$route.params.address,this.arrive=this.$route.params.arrive,this.searchCar()),Object(o.c)().then(function(e){t.isUseGoogle=e})},watch:{sourceCities:function(){this.form.city_id=this.sourceCities[0].id},use_time:function(){this.use_time&&new Date(this.getToday()).getTime()>new Date(this.use_time).getTime()&&(this.$message({message:this.$t("yz.less-today"),type:"warning"}),this.use_time="")}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"divCenter"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.cityLoading,expression:"cityLoading"}],staticClass:"suspend-box"},[i("div",{staticClass:"car-form"},[i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:t.$t("m.time")}},[i("div",{staticClass:"clear-float"},[i("el-date-picker",{staticClass:"prev-icon time",attrs:{type:"datetime","prefix-icon":"null",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:t.$t("m.pick-up-time2")},model:{value:t.use_time,callback:function(e){t.use_time=e},expression:"use_time"}})],1)]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("m.start-point")}},[i("div",{staticClass:"addAddress",on:{click:t.doAddress}}),t._v(" "),i("div",[i("div",{staticClass:"city-adress prev-icon start-position p-relative"},[i("el-select",{attrs:{placeholder:t.$t("account.select")},model:{value:t.form.city_id,callback:function(e){t.$set(t.form,"city_id",e)},expression:"form.city_id"}},t._l(t.sourceCities,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),i("el-autocomplete",{staticClass:"width",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:t.$t("m.start-point-pl"),title:t.address[0],clearable:""},model:{value:t.address[0],callback:function(e){t.$set(t.address,0,e)},expression:"address[0]"}})],1),t._v(" "),t._l(t.address,function(e,s){return i("div",{key:s,staticClass:"p-relative "},[s>0?i("el-autocomplete",{staticClass:"prev-icon start-position w100",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:t.$t("m.start-point-pl"),title:t.address[s],clearable:""},model:{value:t.address[s],callback:function(e){t.$set(t.address,s,e)},expression:"address[index]"}}):t._e(),t._v(" "),s>0?i("i",{staticClass:"el-icon-circle-close deleteAddress",on:{click:function(e){return t.doDelete(s)}}}):t._e()],1)})],2)]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("m.arrive-point")}},[i("el-autocomplete",{staticClass:"prev-icon end-position w100",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:t.$t("m.arrive-point-pl"),title:t.arrive,clearable:""},model:{value:t.arrive,callback:function(e){t.arrive=e},expression:"arrive"}})],1),t._v(" "),t.isSelectCar?[i("div",{staticClass:"car-type"},[i("el-carousel",{attrs:{height:"92px","indicator-position":"none",autoplay:!1,arrow:"always"},on:{change:t.carTypeChange}},t._l(t.carList,function(e,a){return i("el-carousel-item",{key:a,staticClass:"text-center"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.img,expression:"car.img"}]}),t._v(" "),i("p",{staticStyle:{margin:"0"}},[i("span",{staticClass:"car-model p-relative"},[t._v("\n                    "+t._s(e.name)+"\n                    "),i("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover"}},["zh"==t.lang?i("div",{staticStyle:{"text-align":"center"}},[t._v("\n                        "+t._s(e.model)+"或同款车型\n                        "),i("br"),t._v("\n                        可容纳"+t._s(e.people)+"人，"+t._s(e.luggage)+"\n                      ")]):t._e(),t._v(" "),"en"==t.lang?i("div",{staticStyle:{"text-align":"center"}},[t._v("\n                        "+t._s(e.model)+" corolla or similar \n                        "),i("br"),t._v(" "),i("i",{staticClass:"el-icon-user-solid"}),t._v(" "+t._s(e.people)+" "),i("i",{staticClass:"el-icon-s-goods ml20"}),t._v(" "+t._s(e.luggage)+"\n                      ")]):t._e(),t._v(" "),i("img",{staticStyle:{width:"10px",height:"10px","margin-left":"5px",cursor:"pointer"},attrs:{slot:"reference",src:s("nhTu")},slot:"reference"})])],1)])])}),1)],1),t._v(" "),i("p",{staticClass:"total-price"},[t._v(t._s(t.totalPrice))]),t._v(" "),i("el-form-item",[i("el-button",{staticClass:"custom-btn",on:{click:function(e){return t.toConfirmOrder()}}},[t._v(t._s(t.$t("m.book-now")))])],1)]:i("el-form-item",[i("el-button",{staticClass:"custom-btn",attrs:{loading:t.searchLoading},on:{click:t.searchCar}},[t._v("\n            "+t._s(t.$t("m.book"))+"\n            "),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],2)],1)])])},staticRenderFns:[]};var u={name:"appointment",components:{AppointmentBox:s("VU/8")(l,d,!1,function(t){s("VAiV")},"data-v-2782639e",null).exports},data:function(){return{}},methods:{},mounted:function(){this.$store.commit("SET_ACTIVE_PATH",this.$route.path)}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"appointment"},[e("appointment-box"),this._v(" "),e("div",{ref:"mapBox",staticStyle:{position:"absolute",top:"0",width:"100%",height:"100%"},attrs:{id:"allmap"}})],1)},staticRenderFns:[]};var h=s("VU/8")(u,m,!1,function(t){s("OPkG")},"data-v-0422b6ce",null);e.default=h.exports},VAiV:function(t,e){},nhTu:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAzElEQVQoU42QIQ6DQBBF/5AgF8IFcBiwVSSI+vYa4Ctb3cr65RqtLkGBqIQrIBHd4Ag0swECVV0xm/3/zezMEKaTpulhHMcTgN0kvYnoHsfxk9/EQUp5BXCek37uW5IkF5oqPdi0LAtBEMA0TVRVhbZtdQ4RHUlK+QKwZyGKIpRlqc0wDJHn+Vw8Y/ADQLBiGAaGYYDruhBCoK7rGVQbkFXbtuH7PoqiWLeqweVrdhzHQd/3UEqtwWwzDDue56HrOjRNs4B6mL/X8+/Cv0U+V8vE4jm3AAAAAElFTkSuQmCC"}});
//# sourceMappingURL=13.bc7dc414d4d25b51f6c3.js.map