webpackJsonp([9],{"0dcX":function(t,e){},"9EPc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),o=a("Dd8w"),n=a.n(o),l=a("bOdI"),i=a.n(l),d=a("NYxO"),c={name:"order-dts",data:function(){var t;return t={star:5,showEvaluate:!1,evaluateValue:"",evaluateStar:0,out_trade_no:"",detailInfo:{},isLoading:!0,operate:{cancel:this.$t("order.cancel-order"),pay:this.$t("order.pay"),refund:this.$t("order.return-money"),urge:this.$t("order.urge"),comment:this.$t("order.customer-service")},status_text:"",type:"",btn_out_trade_no:"",showNoRefundCancel:!1,cancelTitle:this.$t("order.cancel-book")},i()(t,"showNoRefundCancel",!1),i()(t,"cancelOrderInfo",{}),i()(t,"showCancelOrder",!1),i()(t,"showComment",!1),t},computed:n()({},Object(d.e)({lang:function(t){return t.lang}})),methods:{goOrderList:function(){this.$router.push({name:"orderList"})},getDetail:function(){var t=this;this.$axios.get(this.lang+"/order/detail?out_trade_no="+this.out_trade_no).then(function(e){t.detailInfo=e.data.data,t.isLoading=!1,t.status_text=e.data.data.order.status_text,window.scrollTo(0,0),t.getlatlngByAddress(e.data.data.relate.address)})},operateBtn:function(t,e){if(this.btn_out_trade_no=e,"pay"==t){var a=this.detailInfo.order.currency_symbol+this.detailInfo.order.total_fee;sessionStorage.setItem("payParams",r()({num:a,out_trade_no:e})),this.$router.push({name:"payorder"})}else"cancel"==t?this.orderCancel(e):"refund"==t?this.orderRefund():"urge"==t?this.orderUrgent():"comment"==t&&(this.showEvaluate=!0)},comment:function(){var t=this,e={id:this.detailInfo.relate.driver.driver_order_id,score:this.evaluateStar,comment:this.evaluateValue};this.$axios.post(this.lang+"/order/comment",e).then(function(e){1==e.data.status&&(t.$message.success(t.$t("order.comment-successful")),t.getDetail())})},bindCancel:function(t){1==t?this.confirmCancelOrder():(this.cancelTitle=this.$t("order.cancel-book"),this.showCancelOrder=!1,this.getDetail())},orderUrgent:function(){var t=this;this.$axios.post(this.lang+"/order/urgent",{out_trade_no:this.btn_out_trade_no}).then(function(e){1==e.data.status&&t.$message.success(t.$t("order.urge-successful"))})},orderRefund:function(){var t=this;this.$axios.post(this.lang+"/order/refund",{out_trade_no:this.btn_out_trade_no}).then(function(e){1==e.data.status&&(t.cancelTitle="",t.showCancelOrder=!0)})},confirmCancelOrder:function(){var t=this;this.$axios.post(this.lang+"/order/cancel-confirm",{out_trade_no:this.btn_out_trade_no}).then(function(e){t.showCancelOrder=!0,t.getDetail()})},orderCancel:function(t){var e=this,a={out_trade_no:t};this.$axios.post(this.lang+"/order/cancel",a).then(function(t){0==t.data.data.need_alert?(e.getDetail(),e.showNoRefundCancel=!0):(e.showCancelOrder=!0,e.cancelOrderInfo=t.data.data)})},getlatlngByAddress:function(t){var e=this,a=[];t.map(function(t,s){e.$axios.get(e.lang+"/tools/to-coordinate?address="+t).then(function(t){t.data.data.results.length>0&&(a.push(t.data.data.results[0].geometry.location),e.initBaiduMap(a))})})},initBaiduMap:function(t){var e=this,a=new BMap.Map("mapId"),s=new BMap.Point(t[0].lng,t[0].lat);if(a.centerAndZoom(s,15),a.enableScrollWheelZoom(!0),2==t.length){var r=new BMap.Point(t[0].lng,t[0].lat),o=new BMap.Point(t[1].lng,t[1].lat),n=new BMap.Polyline([r,o],{strokeColor:"#F15C47",strokeWeight:3,strokeOpacity:.5});a.addOverlay(n),t.map(function(t,s){e.addMarker(a,new window.BMap.Point(t.lng,t.lat),s)})}},addMarker:function(t,e,a){var s=new BMap.Marker(e);return t.addOverlay(s),s}},mounted:function(){this.out_trade_no=this.$route.query.out_trade_no,this.type=this.$route.query.type,this.getDetail()}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-dts"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"left-content"},[s("p",{staticClass:"cursor",on:{click:t.goOrderList}},[s("img",{staticClass:"el-icon-back",attrs:{src:a("O7P/")}}),t._v(" "),s("span",{staticClass:"fz14 color-666 ml10"},[t._v(t._s(t.$t("order.back")))])]),t._v(" "),s("div",{staticClass:"flex-between item-center"},[t.detailInfo.relate?s("div",{staticClass:"air-plane"},[s("div",{staticClass:"air-plane-title mt20"},[1==t.detailInfo.relate.type&&"transfer"==t.type?s("img",{staticClass:"order-type-img",attrs:{src:a("mwoX"),alt:""}}):t._e(),t._v(" "),2==t.detailInfo.relate.type&&"transfer"==t.type?s("img",{staticClass:"order-type-img",attrs:{src:a("NqKz"),alt:""}}):t._e(),t._v(" "),s("span",{staticClass:"fz16 color-333 fw600 ml10"},["transfer"==t.type?s("span",[t._v(t._s(1==t.detailInfo.relate.type?t.$t("m.pick-up"):t.$t("m.drop-off")))]):s("span",[t._v(t._s(t.$t("order.reservation")))])])]),t._v(" "),t.detailInfo.relate.driver?s("div",{staticClass:"driver flex item-center mt20"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.detailInfo.relate.driver.driver.img,expression:"detailInfo.relate.driver.driver.img"}],staticClass:"wh46",attrs:{alt:""}}),t._v(" "),t.detailInfo.relate?s("div",{staticClass:"ml10"},[s("span",{staticClass:"fz16 color-333"},[t._v(t._s(t.detailInfo.relate.driver.driver.real_name))]),s("br"),t._v(" "),s("span",{staticClass:"fz14 color-333 mt5"},[t._v(t._s(t.detailInfo.relate.driver.driver_mobile_code)+" "+t._s(t.detailInfo.relate.driver.driver_mobile))])]):t._e()]):t._e(),t._v(" "),t.detailInfo.order?s("div",{staticClass:"flex-between service-info"},[s("div",{staticClass:"fz14 color-333"},[s("p",[t._v(t._s("transfer"==t.type?1==t.detailInfo.relate.type?t.$t("m.pick-up"):t.$t("m.drop-off"):t.$t("order.reservation")))]),t._v(" "),s("p",[t._v("\n              "+t._s(t.$t("order.baby-booster"))+"\n              "),s("img",{staticClass:"wh14 ml5 hide",attrs:{src:a("zOyB"),alt:""}})]),t._v(" "),"transfer"==t.type?s("p",[t._v("\n              "+t._s(t.$t("order.meet-greet2"))+"\n              "),s("img",{staticClass:"wh14 ml5 hide",attrs:{src:a("zOyB"),alt:""}})]):t._e(),t._v(" "),s("p",[t._v("\n              "+t._s(t.$t("order.discount"))+"\n              "),s("img",{staticClass:"wh14 ml5 hide",attrs:{src:a("zOyB"),alt:""}})])]),t._v(" "),s("div",{staticClass:"fz14 color-333"},[s("p",[t.detailInfo.order.base_fee>0?s("span",[t._v(t._s(t.detailInfo.order.currency_symbol))]):t._e(),t._v("\n              "+t._s(t.detailInfo.order.base_fee)+"\n            ")]),t._v(" "),s("p",[0!=t.detailInfo.order.children_seat_fee?s("span",[t._v(t._s(t.detailInfo.order.currency_symbol))]):t._e(),t._v("\n              "+t._s(t.detailInfo.order.children_seat_fee)+"\n            ")]),t._v(" "),"transfer"==t.type?s("p",[t.detailInfo.order.hight_way_fee>0?s("span",[t._v(t._s(t.detailInfo.order.currency_symbol))]):t._e(),t._v("\n              "+t._s(t.detailInfo.order.hight_way_fee)+"\n            ")]):t._e(),t._v(" "),s("p",{staticClass:"color-green"},[t.detailInfo.order.discount_fee>0?s("span",[t._v("-"+t._s(t.detailInfo.order.currency_symbol)+t._s(t.detailInfo.order.discount_fee))]):s("span",[t._v("0")])])])]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"map-img",attrs:{id:"mapId"}})]),t._v(" "),t.detailInfo.order?s("div",{staticClass:"flex-between pay-info mt5"},[s("div",{staticClass:"flex-between pay-num"},[s("div",{staticClass:"color-333 fw600"},[s("p",{staticClass:"fz16"},[t._v(t._s(t.$t("order.total2")))]),t._v(" "),s("p",{staticClass:"fz14 mt5"},[t._v("\n            "+t._s(t.$t("order.commission8"))+"\n            "),s("img",{staticClass:"wh14 ml5 hide",attrs:{src:a("zOyB"),alt:""}})])]),t._v(" "),s("div",{staticClass:"color-green"},[s("p",{staticClass:"fz22"},[t._v(t._s(t.detailInfo.order.currency_symbol)+t._s(t.detailInfo.order.total_fee))]),t._v(" "),s("p",{staticClass:"fz16 text-right"},[t.detailInfo.order.rebate_fee>0?s("span",[t._v(t._s(t.detailInfo.order.currency_symbol))]):t._e(),t._v("\n            "+t._s(t.detailInfo.order.rebate_fee)+"\n          ")])])]),t._v(" "),s("div",{staticClass:"bind-btns"},t._l(t.detailInfo.order.operate,function(e){return s("el-button",{key:e,class:{green:"pay"==e||"refund"==e,black:"cancel"==e||"urge"==e||"comment"==e},on:{click:function(a){return t.operateBtn(e,t.detailInfo.order.out_trade_no)}}},[t._v(t._s(t.operate[e]))])}),1)]):t._e(),t._v(" "),t.detailInfo.relate?s("div",{staticClass:"detail-info"},[s("div",{staticClass:"p-relative trap-info"},[s("p",{staticClass:"flex-between"},[s("span",[s("img",{staticClass:"wh10",attrs:{src:a("qscf"),alt:""}}),t._v(" "),s("label",{staticClass:"fz14 color-666 ml5"},[t._v(t._s(t.detailInfo.relate.use_time))])]),t._v(" "),s("span",{staticClass:"fz14 color-green"},[t._v(t._s(t.status_text))])]),t._v(" "),s("p",[s("img",{staticClass:"wh10",attrs:{src:a("FGWT"),alt:""}}),t._v(" "),s("label",{staticClass:"fz16 color-333 fw600 ml5"},[t._v(t._s(t.detailInfo.relate.address[0]))])]),t._v(" "),s("p",[s("span",{staticClass:"line inline-block"}),t._v(" "),s("span",{staticClass:"fz14 color-666 ml20"},[t._v(t._s(t.$t("order.about"))+t._s(t.detailInfo.relate.distance)+"km")])]),t._v(" "),s("p",[s("img",{staticClass:"wh10",attrs:{src:a("xmsu"),alt:""}}),t._v(" "),s("label",{staticClass:"fz16 color-333 fw600 ml5"},[t._v(t._s(t.detailInfo.relate.address[1]))])]),t._v(" "),"transfer"==t.type?s("p",[s("img",{staticClass:"wh10",attrs:{src:a("hx4f"),alt:""}}),t._v(" "),s("label",{staticClass:"fz14 color-666 ml5"},[t._v(t._s(t.detailInfo.relate.car))])]):t._e(),t._v(" "),"pointcar"==t.type?s("p",[s("img",{staticClass:"wh10",attrs:{src:a("E+7+"),alt:""}}),t._v(" "),s("label",{staticClass:"fz14 color-666 ml5"},[t._v(t._s(t.$t("wallet.order-number"))+"ï¼š"+t._s(t.detailInfo.order.out_trade_no))])]):t._e()]),t._v(" "),"transfer"==t.type?s("div",{staticClass:"flex-between detail-text mt20"},[s("div",[s("p",[t._v(t._s(t.$t("order.pick-up-time")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.distance")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.flight")))])]),t._v(" "),s("div",{staticClass:"text-right"},[s("p",[s("label",[t._v(t._s(t.detailInfo.relate.use_time))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.$t("order.about"))+t._s(t.detailInfo.relate.distance)+"km")])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.relate.flight_no))])])])]):t._e(),t._v(" "),s("div",{staticClass:"flex-between detail-text"},[s("div",["transfer"==t.type?s("p",[t._v(t._s(t.$t("order.car-type")))]):t._e(),t._v(" "),s("p",[t._v(t._s(t.$t("m.passengers2")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.luggages")))])]),t._v(" "),s("div",{staticClass:"text-right"},["transfer"==t.type?s("p",[s("label",[t._v(t._s(t.detailInfo.relate.car))])]):t._e(),t._v(" "),s("p",[s("label",[t._v(t._s(t.$t("m.adult"))+"*"+t._s(t.detailInfo.order.adults)+"ï¼Œ"+t._s(t.$t("m.children"))+"*"+t._s(t.detailInfo.order.children))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.$t("order.large-luggage"))+"*"+t._s(t.detailInfo.relate.big_luggage)+"ï¼Œ"+t._s(t.$t("order.carry-on-luggage"))+"*"+t._s(t.detailInfo.relate.small_luggage))])])])]),t._v(" "),s("div",{staticClass:"flex-between detail-text"},[s("div",[s("p",[t._v(t._s(t.$t("order.client-name2")))]),t._v(" "),s("p",[t._v(t._s(t.$t("m.phone-number")))]),t._v(" "),s("p",[t._v(t._s(t.$t("m.wechat-number")))])]),t._v(" "),s("div",{staticClass:"text-right"},[s("p",[s("label",[t._v(t._s(t.detailInfo.contact.contact_name))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.contact.contact_mobile))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.contact.wechat))])])])]),t._v(" "),s("div",{staticClass:"flex-between detail-text"},[s("div",[s("p",[t._v(t._s(t.$t("order.emergency-contact")))]),t._v(" "),s("p",[t._v(t._s(t.$t("m.phone-number")))]),t._v(" "),s("p",[t._v(t._s(t.$t("m.wechat-number")))]),t._v(" "),"pointcar"==t.type?s("p",[t._v(t._s(t.$t("order.note-dts")))]):t._e()]),t._v(" "),s("div",{staticClass:"text-right"},[s("p",[s("label",[t._v(t._s(t.detailInfo.contact.spare_contact_name))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.contact.spare_contact_mobile))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.contact.spare_wechat))])]),t._v(" "),"pointcar"==t.type?s("p",[s("label",[t._v(t._s(t.detailInfo.order.remark))])]):t._e()])]),t._v(" "),"transfer"==t.type?s("div",{staticClass:"flex-between detail-text"},[s("div",[s("p",[t._v(t._s(t.$t("wallet.order-number")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.date-ordered")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.note-dts")))]),t._v(" "),s("p",{staticClass:"color-green"},[t._v(t._s(t.$t("order.special-instructions")))])]),t._v(" "),s("div",{staticClass:"text-right"},[s("p",[s("label",[t._v(t._s(t.detailInfo.order.out_trade_no))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.order.create_time))])]),t._v(" "),s("p",[s("label",[t._v(t._s(t.detailInfo.order.remark))])]),t._v(" "),s("p",[s("label",[t._v("\n              "+t._s(1==t.detailInfo.relate.brand_pick_up?t.$t("order.meet-greet"):"")+"\n              "),s("br"),t._v("\n              "+t._s(1==t.detailInfo.relate.is_high_way?t.$t("order.toll-way2"):"")+"\n              "),s("br"),t._v("\n              "+t._s(t.detailInfo.order.children>0?this.$t("order.baby-booster2")+"*"+t.detailInfo.order.children:"")+"\n            ")])])])]):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"right-content",class:{"zh-right-content":"zh"==t.lang,"en-right-content":"en"==t.lang}},[s("div",{staticClass:"rule"},[s("h3",[t._v(t._s(t.$t("order.refund-rules")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.refund-rules-tips8")))])])]),t._v(" "),t.showComment?s("el-dialog",{attrs:{title:t.$t("order.your-comment"),visible:t.showComment,disabled:"",width:"340px",center:""},on:{"update:visible":function(e){t.showComment=e}}},[s("p",{staticClass:"item-center evaluate"},[s("el-rate",{attrs:{disabled:"","allow-half":""},model:{value:t.detailInfo.relate.comment.score,callback:function(e){t.$set(t.detailInfo.relate.comment,"score",e)},expression:"detailInfo.relate.comment.score"}})],1),t._v(" "),s("p",{staticClass:"pd10 fz14"},[t._v(t._s(t.detailInfo.relate.comment.comment))])]):t._e(),t._v(" "),s("el-dialog",{attrs:{title:t.$t("order.your-comment"),visible:t.showEvaluate,width:"340px",center:""},on:{"update:visible":function(e){t.showEvaluate=e}}},[s("p",{staticClass:"item-center evaluate"},[s("el-rate",{attrs:{"allow-half":""},model:{value:t.evaluateStar,callback:function(e){t.evaluateStar=e},expression:"evaluateStar"}})],1),t._v(" "),s("el-input",{staticClass:"mt20",attrs:{type:"textarea",placeholder:t.$t("order.tips-comment"),"show-word-limit":""},model:{value:t.evaluateValue,callback:function(e){t.evaluateValue=e},expression:"evaluateValue"}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"custom-btn",on:{click:function(e){return t.comment()}}},[t._v(t._s(t.$t("m.ok")))])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.cancelTitle,visible:t.showCancelOrder,width:"360px",center:""},on:{"update:visible":function(e){t.showCancelOrder=e},close:function(e){return t.bindCancel(2)}}},[t.cancelTitle?s("p",{staticClass:"fz14 color-333"},[0==t.cancelOrderInfo.is_order?s("span",[t._v(t._s(t.$t("order.has-driver")))]):t._e(),t._v(" "),s("span",[t._v(t._s(t.$t("order.cancel-tips2")))]),t._v(" "),s("span",[t._v(t._s(t.$t("order.refund-money"))+t._s(t.cancelOrderInfo.currency)+t._s(t.cancelOrderInfo.refund))])]):t._e(),t._v(" "),t.cancelTitle?s("span",{staticClass:"dialog-footer cancel-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.showCancelOrder=!1}}},[t._v(t._s(t.$t("order.no")))]),t._v(" "),s("el-button",{staticClass:"mt10",attrs:{size:"small",type:"danger"},on:{click:function(e){return t.bindCancel(1)}}},[t._v(t._s(t.$t("order.y-cancel")))])],1):t._e(),t._v(" "),t.cancelTitle?t._e():s("div",{staticClass:"refund-success text-center"},[s("img",{attrs:{src:a("yhq9"),alt:""}}),t._v(" "),s("p",{staticClass:"fz20 color-333 fw600"},[t._v(t._s(t.$t("order.refund-successful")))]),t._v(" "),s("p",[t._v(t._s(t.$t("order.refund-tips")))]),t._v(" "),s("el-button",{attrs:{size:"medium",round:""},on:{click:function(e){return t.bindCancel(2)}}},[t._v(t._s(t.$t("order.ok2")))])],1)]),t._v(" "),s("el-dialog",{attrs:{visible:t.showNoRefundCancel,width:"360px",center:""},on:{"update:visible":function(e){t.showNoRefundCancel=e}}},[s("div",{staticClass:"text-center"},[s("img",{attrs:{src:a("tkv7"),alt:""}}),t._v(" "),s("p",{staticClass:"fz20 color-333 fw600"},[t._v(t._s(t.$t("order.cancel-successful")))]),t._v(" "),s("el-button",{staticClass:"no-redund-cancel cursor",attrs:{size:"medium",round:""},on:{click:function(e){t.showNoRefundCancel=!1}}},[t._v(t._s(t.$t("order.ok2")))])],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(c,_,!1,function(t){a("0dcX")},"data-v-4dc318c3",null);e.default=v.exports},"E+7+":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAA1ElEQVQoU53QoU7DUBgF4HN67wO0hqSGoDYcTzBJMBhEH6G5vVkyFAFZMzcErvcaEh4AP8keYAIQaEzN3qDp/5MKEsYaBEd/4pxD/JG6rpO2bW9Udcaqqi7GbNd1H9bahaq+AsgHuCT59BOLiAEw7/t+a4w5zfP8ls656xDCwzcsisJkWbYi+S4iZyRXMcbPPTigNE3vkyR5U9WpiDxaa4+bplnvwbIsr0heAtjFGO+89xNVPTmAzrlzACaEsAag3vvpKPy9/t/wGcDL2JckjwBsho5fzFh1HXEwWKoAAAAASUVORK5CYII="},hx4f:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAA8klEQVQoU42QsUoFMRBF75219ScsxVLwE7RQ8FmL1dtkbQWxECweWIhg6yZrJdY+QQtt7AVLsfQjtHVzJcuuLFZOkZlkzsxkLtFbWZabJA8ArPZPr5IumqZ5yHfmwzl3CuCQ5DWAxx7ckLQH4DzGeMy+052k7aH6z5QuR+fcs6SFoihOBmDs27adkfzO4CeAxSFJ8inHktZHBV8daGbTtm0NwKWZvWQgpbQGYN/MJKnpRpP8CCFMq6qapJRuM2hmO3Vdz733V5KWfpchOQkh3Dvn3jIYY1zx3m9JmnfLjOQ5AnADYLn/2zuAXQBnnTz/FfwHWiF0KfV4Q+0AAAAASUVORK5CYII="}});
//# sourceMappingURL=9.3288424964e5daab1056.js.map